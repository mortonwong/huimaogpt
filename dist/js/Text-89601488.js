import{M as g}from"./markdown-it-2fba393f.js";import{m as b}from"./@traptitech-9a3f8757.js";import{m as w}from"./markdown-it-link-attributes-7ecb0d9a.js";import{H as m}from"./highlight.js-42a3adc5.js";import{a as C,t as B}from"./index-1a245f76.js";import{c as E}from"./index-8326f63b.js";import{d as T,r as L,c as f,b as M,a6 as R,A as S,R as r,S as n,X as A,P as c,V as k,_ as H,Z as $}from"./@vue-592ec505.js";import"./uc.micro-740ead6f.js";import"./mdurl-79eba04e.js";import"./linkify-it-191b779c.js";import"./punycode-091d9791.js";import"./katex-440aaa3c.js";import"./naive-ui-14dd61e4.js";import"./vooks-9f50f2ef.js";import"./evtd-b614532e.js";import"./vdirs-b0483831.js";import"./treemate-25c27bff.js";import"./seemly-411025cc.js";import"./vueuc-72877a4a.js";import"./@css-render-80c01661.js";import"./@juggle-41516555.js";import"./css-render-d3958e6a.js";import"./@emotion-8a8e73f6.js";import"./lodash-es-cabc0acd.js";import"./date-fns-975a2d8f.js";import"./pinia-af09d699.js";import"./vue-router-c5800335.js";import"./axios-760d4776.js";import"./@vueuse-2be4af1e.js";import"./vue-i18n-2e8fc103.js";import"./@intlify-7347860c.js";import"./@iconify-4e28c541.js";import"./html2canvas-18c4afc9.js";const q={key:0},V=["innerHTML"],N=["textContent"],U=["textContent"],j={key:2,class:"dark:text-white w-[4px] h-[20px] block animate-blink"},ve=T({__name:"Text",props:{inversion:{type:Boolean},error:{type:Boolean},text:null,loading:{type:Boolean},asRawText:{type:Boolean}},setup(i){const o=i,{isMobile:y}=C(),a=L(),l=new g({html:!1,linkify:!0,highlight(t,e){if(!!(e&&m.getLanguage(e))){const s=e??"";return u(m.highlight(t,{language:s}).value,s)}return u(m.highlightAuto(t).value,"")}});l.use(w,{attrs:{target:"_blank",rel:"noopener"}}),l.use(b,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"});const v=f(()=>["text-wrap","min-w-[20px]","rounded-md",y.value?"p-2":"px-3 py-2",o.inversion?"bg-[#d2f9d1]":"bg-[#f4f6f8]",o.inversion?"dark:bg-[#a1dc95]":"dark:bg-[#1e1e20]",o.inversion?"message-request":"message-reply",{"text-red-500":o.error}]),p=f(()=>{const t=o.text??"";return o.asRawText?t:l.render(t)});function u(t,e){return`<pre class="code-block-wrapper"><div class="code-block-header"><span class="code-block-header__lang">${e}</span><span class="code-block-header__copy">${B("chat.copyCode")}</span></div><code class="hljs code-block-body ${e}">${t}</code></pre>`}function h(){a.value&&a.value.querySelectorAll(".code-block-header__copy").forEach(e=>{e.addEventListener("click",()=>{var s,x;const d=(x=(s=e.parentElement)==null?void 0:s.nextElementSibling)==null?void 0:x.textContent;d&&E(d).then(()=>{e.textContent="复制成功",setTimeout(()=>{e.textContent="复制代码"},1e3)})})})}function _(){a.value&&a.value.querySelectorAll(".code-block-header__copy").forEach(e=>{e.removeEventListener("click",()=>{})})}return M(()=>{h()}),R(()=>{h()}),S(()=>{_()}),(t,e)=>(r(),n("div",{class:$(["text-black",c(v)])},[A("div",{ref_key:"textRef",ref:a,class:"leading-relaxed break-words"},[i.inversion?(r(),n("div",{key:1,class:"whitespace-pre-wrap",textContent:k(c(p))},null,8,U)):(r(),n("div",q,[i.asRawText?(r(),n("div",{key:1,class:"whitespace-pre-wrap",textContent:k(c(p))},null,8,N)):(r(),n("div",{key:0,class:"markdown-body",innerHTML:c(p)},null,8,V))])),i.loading?(r(),n("span",j)):H("",!0)],512)],2))}});export{ve as default};
