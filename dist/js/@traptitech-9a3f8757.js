import{k as h}from"./katex-440aaa3c.js";var x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function y(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var r=function l(){if(this instanceof l){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(n,i);return new o}return n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var i=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(r,l,i.get?i:{enumerable:!0,get:function(){return e[l]}})}),r}var d=h;function k(e,n){var r,l,i=e.posMax,o=!0,c=!0;return r=n>0?e.src.charCodeAt(n-1):-1,l=n+1<=i?e.src.charCodeAt(n+1):-1,(r===32||r===9||l>=48&&l<=57)&&(c=!1),(l===32||l===9)&&(o=!1),{can_open:o,can_close:c}}function m(e,n){var r,l,i,o,c;if(e.src[e.pos]!=="$")return!1;if(o=k(e,e.pos),!o.can_open)return n||(e.pending+="$"),e.pos+=1,!0;for(r=e.pos+1,l=r;(l=e.src.indexOf("$",l))!==-1;){for(c=l-1;e.src[c]==="\\";)c-=1;if((l-c)%2==1)break;l+=1}return l===-1?(n||(e.pending+="$"),e.pos=r,!0):l-r===0?(n||(e.pending+="$$"),e.pos=r+1,!0):(o=k(e,l),o.can_close?(n||(i=e.push("math_inline","math",0),i.markup="$",i.content=e.src.slice(r,l)),e.pos=l+1,!0):(n||(e.pending+="$"),e.pos=r,!0))}function b(e,n,r,l){var i,o,c,f,u=!1,p,a=e.bMarks[n]+e.tShift[n],t=e.eMarks[n];if(a+2>t||e.src.slice(a,a+2)!=="$$")return!1;if(a+=2,i=e.src.slice(a,t),l)return!0;for(i.trim().slice(-2)==="$$"&&(i=i.trim().slice(0,-2),u=!0),c=n;!u&&(c++,!(c>=r||(a=e.bMarks[c]+e.tShift[c],t=e.eMarks[c],a<t&&e.tShift[c]<e.blkIndent)));)e.src.slice(a,t).trim().slice(-2)==="$$"&&(f=e.src.slice(0,t).lastIndexOf("$$"),o=e.src.slice(a,f),u=!0);return e.line=c+1,p=e.push("math_block","math",0),p.block=!0,p.content=(i&&i.trim()?i+`
`:"")+e.getLines(n+1,c,e.tShift[n],!0)+(o&&o.trim()?o:""),p.map=[n,e.line],p.markup="$$",!0}function s(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var g=function(n,r){r=r||{},r.katex&&(d=r.katex),r.blockClass||(r.blockClass="");var l=function(f){r.displayMode=!1;try{return d.renderToString(f,r)}catch(u){return r.throwOnError&&console.log(u),`<span class='katex-error' title='${s(u.toString())}'>${s(f)}</span>`}},i=function(f,u){return l(f[u].content)},o=function(f){r.displayMode=!0;try{return`<p class="katex-block ${r.blockClass}">`+d.renderToString(f,r)+"</p>"}catch(u){return r.throwOnError&&console.log(u),`<p class='katex-block katex-error ${r.blockClass}' title='${s(u.toString())}'>${s(f)}</p>`}},c=function(f,u){return o(f[u].content)+`
`};n.inline.ruler.after("escape","math_inline",m),n.block.ruler.after("blockquote","math_block",b,{alt:["paragraph","reference","blockquote","list"]}),n.renderer.rules.math_inline=i,n.renderer.rules.math_block=c};const v=g;export{y as a,x as c,_ as g,v as m};
